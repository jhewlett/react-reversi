<!DOCTYPE html>
<html>
<head>
    <title>Reversi</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
<table id="player-table">
    <tr>
        <td id="player1-label">Player 1</td>
        <td class="player1"></td>
        <td id="player1-score">2</td>
    </tr>
    <tr>
        <td id="player2-label">Player 2</td>
        <td class="player2"></td>
        <td id="player2-score">2</td>
    </tr>
</table>
<table>
    <tr><td id="00"> </td><td id="01"> </td><td id="02"> </td><td id="03"> </td><td id="04"> </td><td id="05"> </td><td id="06"> </td><td id="07"> </td></tr>
    <tr><td id="10"> </td><td id="11"> </td><td id="12"> </td><td id="13"> </td><td id="14"> </td><td id="15"> </td><td id="16"> </td><td id="17"> </td></tr>
    <tr><td id="20"> </td><td id="21"> </td><td id="22"> </td><td id="23"> </td><td id="24"> </td><td id="25"> </td><td id="26"> </td><td id="27"> </td></tr>
    <tr><td id="30"> </td><td id="31"> </td><td id="32"> </td><td id="33"> </td><td id="34"> </td><td id="35"> </td><td id="36"> </td><td id="37"> </td></tr>
    <tr><td id="40"> </td><td id="41"> </td><td id="42"> </td><td id="43"> </td><td id="44"> </td><td id="45"> </td><td id="46"> </td><td id="47"> </td></tr>
    <tr><td id="50"> </td><td id="51"> </td><td id="52"> </td><td id="53"> </td><td id="54"> </td><td id="55"> </td><td id="56"> </td><td id="57"> </td></tr>
    <tr><td id="60"> </td><td id="61"> </td><td id="62"> </td><td id="63"> </td><td id="64"> </td><td id="65"> </td><td id="66"> </td><td id="67"> </td></tr>
    <tr><td id="70"> </td><td id="71"> </td><td id="72"> </td><td id="73"> </td><td id="74"> </td><td id="75"> </td><td id="76"> </td><td id="77"> </td></tr>
</table>
</body>
<script src="Board.js"></script>
<script src="Game.js"></script>
<script>
    var game = new Reversi.Game();

    for (var i = 0; i < 8; i++) {
        for (var j = 0; j < 8; j++) {
            var id = i.toString() + j.toString();

            var element = document.getElementById(id);

            element.onclick = (function (iCopy, jCopy) {
                return function(){
                    if (game.makeMove(iCopy, jCopy)) {
                        drawBoard();
                    }
                };
            }(i, j));
        }
    }

    var drawBoard = function() {
        for (var i = 0; i < 8; i++) {
            for (var j = 0; j < 8; j++) {
                var id = i.toString() + j.toString();

                var element = document.getElementById(id);

                var status = game.getStatus(i, j);

                if (status === Reversi.Player1) {
                    element.classList.remove('player2');
                    element.classList.add('player1');
                } else if (status === Reversi.Player2) {
                    element.classList.remove('player1');
                    element.classList.add('player2');
                }
            }
        }

        updatePlayerLabels();
        updateScore();
    };

    var updatePlayerLabels = function() {
        var currentPlayer = game.getPlayer();

        var player1 = document.getElementById('player1-label');
        var player2 = document.getElementById('player2-label');

        if (currentPlayer === Reversi.Player1) {
            player2.style.fontWeight = "normal";
            player1.style.fontWeight = "bold";
        } else {
            player1.style.fontWeight = "normal";
            player2.style.fontWeight = "bold";
        }
    };

    var updateScore = function() {
        var player1Score = document.getElementById('player1-score');
        var player2Score = document.getElementById('player2-score');

        player1Score.innerHTML = game.getScore(Reversi.Player1);
        player2Score.innerHTML = game.getScore(Reversi.Player2);
    };

    drawBoard();

</script>
</html>